<Prefab>
  <Constants>
    <Constant Name="LeftInventoryButtonMarignLeft" Value="680"/>
    <Constant Name="RightInventoryButtonMarignLeft" Value="580"/>
    <Constant Name="LeftInventoryLockButtonMarignLeft" Value="687"/>
    <Constant Name="RightInventoryLockButtonMarignLeft" Value="587"/>

    <Constant Name="PanelWidth" Value="400"/>
    <Constant Name="PanelHeight" Value="800"/>
    <Constant Name="FrameExtendSize" Value="20"/>

    <Constant Name="TopPanelHeight" Value="350"/>
    <Constant Name="BottomPanelHeight" Value="230"/>
    <Constant Name="BottomLeftPanelHeight" Value="180"/>

    <Constant Name="SubPanelMarginLeft" Value="15"/>
    <Constant Name="SubPanelMarginRight" Value="5"/>

    <Constant Name="IncrementButtonSize" Value="50"/>
    <Constant Name="IncrementButtonTop" Value="25"/>

    <Constant Name="BottomLeftSidePanelWidth" Value="160"/>
    <Constant Name="BottomRightSidePanelWidth" Value="210"/>
    <Constant Name="ButtonFontSize" Value="20"/>
    <Constant Name="ButtonBiggerFontSize" Value="24"/>

  </Constants>
  <Window>
    <Widget DoNotAcceptEvents="true" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent">
      <Children>
        <!-- Filter Buttons on the inventory slots -->
        <Widget DataSource="{IconVM}" DoNotAcceptEvents="true" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent">
          <Children>
            <ButtonWidget IsHidden="@IsHelmFilterLocked" Id="Helm" IsSelected="@IsHelmFilterSelected" Command.Click="ExecuteShowHideHelmFilter" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="35" SuggestedHeight="26" HorizontalAlignment="Left" MarginLeft="!LeftInventoryButtonMarignLeft" MarginTop="241" Brush="Inventory.EquipBetterItem.Filter" />
            <ButtonWidget IsEnabled="@IsHelmFilterLocked" Id="HelmLocked" Command.Click="ExecuteShowHideHelmFilter" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="21" SuggestedHeight="20" HorizontalAlignment="Left" MarginLeft="!LeftInventoryLockButtonMarignLeft" MarginTop="246" Brush="Inventory.EquipBetterItem.FilterLock" />

            <ButtonWidget IsHidden="@IsCloakFilterLocked" Id="Cloak" IsSelected="@IsCloakFilterSelected" Command.Click="ExecuteShowHideCloakFilter" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="35" SuggestedHeight="26" HorizontalAlignment="Left" MarginLeft="!LeftInventoryButtonMarignLeft" MarginTop="326" Brush="Inventory.EquipBetterItem.Filter" />
            <ButtonWidget IsEnabled="@IsCloakFilterLocked" Id="CloakLocked" Command.Click="ExecuteShowHideCloakFilter" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="21" SuggestedHeight="20" HorizontalAlignment="Left" MarginLeft="!LeftInventoryLockButtonMarignLeft" MarginTop="331" Brush="Inventory.EquipBetterItem.FilterLock" />

            <ButtonWidget IsHidden="@IsArmorFilterLocked" Id="Armor" IsSelected="@IsArmorFilterSelected" Command.Click="ExecuteShowHideArmorFilter" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="35" SuggestedHeight="26" HorizontalAlignment="Left" MarginLeft="!LeftInventoryButtonMarignLeft" MarginTop="411" Brush="Inventory.EquipBetterItem.Filter" />
            <ButtonWidget IsEnabled="@IsArmorFilterLocked" Id="ArmorLocked" Command.Click="ExecuteShowHideArmorFilter" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="21" SuggestedHeight="20" HorizontalAlignment="Left" MarginLeft="!LeftInventoryLockButtonMarignLeft" MarginTop="416" Brush="Inventory.EquipBetterItem.FilterLock" />

            <ButtonWidget IsHidden="@IsGloveFilterLocked" Id="Glove" IsSelected="@IsGloveFilterSelected" Command.Click="ExecuteShowHideGloveFilter" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="35" SuggestedHeight="26" HorizontalAlignment="Left" MarginLeft="!LeftInventoryButtonMarignLeft" MarginTop="496" Brush="Inventory.EquipBetterItem.Filter" />
            <ButtonWidget IsEnabled="@IsGloveFilterLocked" Id="GloveLocked" Command.Click="ExecuteShowHideGloveFilter" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="21" SuggestedHeight="20" HorizontalAlignment="Left" MarginLeft="!LeftInventoryLockButtonMarignLeft" MarginTop="501" Brush="Inventory.EquipBetterItem.FilterLock" />
            
            <ButtonWidget IsHidden="@IsBootFilterLocked" Id="Boot" IsSelected="@IsBootFilterSelected" Command.Click="ExecuteShowHideBootFilter" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="35" SuggestedHeight="26" HorizontalAlignment="Left" MarginLeft="!LeftInventoryButtonMarignLeft" MarginTop="581" Brush="Inventory.EquipBetterItem.Filter" />
            <ButtonWidget IsEnabled="@IsBootFilterLocked" Id="BootLocked" Command.Click="ExecuteShowHideBootFilter" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="21" SuggestedHeight="20" HorizontalAlignment="Left" MarginLeft="!LeftInventoryLockButtonMarignLeft" MarginTop="586" Brush="Inventory.EquipBetterItem.FilterLock" />
            
            <ButtonWidget IsHidden="@IsMountFilterLocked" Id="Mount" IsSelected="@IsMountFilterSelected" Command.Click="ExecuteShowHideMountFilter" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="35" SuggestedHeight="26" HorizontalAlignment="Left" MarginLeft="!LeftInventoryButtonMarignLeft" MarginTop="700" Brush="Inventory.EquipBetterItem.Filter" />
            <ButtonWidget IsEnabled="@IsMountFilterLocked" Id="MountLocked" Command.Click="ExecuteShowHideMountFilter" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="21" SuggestedHeight="20" HorizontalAlignment="Left" MarginLeft="!LeftInventoryLockButtonMarignLeft" MarginTop="705" Brush="Inventory.EquipBetterItem.FilterLock" />
            
            <ButtonWidget IsHidden="@IsHarnessFilterLocked" Id="Harness" IsSelected="@IsHarnessFilterSelected" Command.Click="ExecuteShowHideHarnessFilter" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="35" SuggestedHeight="26" HorizontalAlignment="Left" MarginLeft="!LeftInventoryButtonMarignLeft" MarginTop="785" Brush="Inventory.EquipBetterItem.Filter" />
            <ButtonWidget IsEnabled="@IsHarnessFilterLocked" Id="HarnessLocked" Command.Click="ExecuteShowHideHarnessFilter" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="21" SuggestedHeight="20" HorizontalAlignment="Left" MarginLeft="!LeftInventoryLockButtonMarignLeft" MarginTop="790" Brush="Inventory.EquipBetterItem.FilterLock" />

            <ButtonWidget IsHidden="@IsWeapon1FilterLocked" Id="Weapon1" IsSelected="@IsWeapon1FilterSelected" Command.Click="ExecuteShowHideWeapon1Filter" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="35" SuggestedHeight="26" HorizontalAlignment="Right" MarginRight="!RightInventoryButtonMarignLeft" MarginTop="326" Brush="Inventory.EquipBetterItem.Filter" />
            <ButtonWidget IsEnabled="@IsWeapon1FilterLocked" Id="Weapon1Locked" Command.Click="ExecuteShowHideWeapon1Filter" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="21" SuggestedHeight="20" HorizontalAlignment="Right" MarginRight="!RightInventoryLockButtonMarignLeft" MarginTop="331" Brush="Inventory.EquipBetterItem.FilterLock" />

            <ButtonWidget IsHidden="@IsWeapon2FilterLocked" Id="Weapon2" IsSelected="@IsWeapon2FilterSelected" Command.Click="ExecuteShowHideWeapon2Filter" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="35" SuggestedHeight="26" HorizontalAlignment="Right" MarginRight="!RightInventoryButtonMarignLeft" MarginTop="411" Brush="Inventory.EquipBetterItem.Filter" />
            <ButtonWidget IsEnabled="@IsWeapon2FilterLocked" Id="Weapon2Locked" Command.Click="ExecuteShowHideWeapon2Filter" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="21" SuggestedHeight="20" HorizontalAlignment="Right" MarginRight="!RightInventoryLockButtonMarignLeft" MarginTop="416" Brush="Inventory.EquipBetterItem.FilterLock" />

            <ButtonWidget IsHidden="@IsWeapon3FilterLocked" Id="Weapon3" IsSelected="@IsWeapon3FilterSelected" Command.Click="ExecuteShowHideWeapon3Filter" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="35" SuggestedHeight="26" HorizontalAlignment="Right" MarginRight="!RightInventoryButtonMarignLeft" MarginTop="496" Brush="Inventory.EquipBetterItem.Filter" />
            <ButtonWidget IsEnabled="@IsWeapon3FilterLocked" Id="Weapon3Locked" Command.Click="ExecuteShowHideWeapon3Filter" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="21" SuggestedHeight="20" HorizontalAlignment="Right" MarginRight="!RightInventoryLockButtonMarignLeft" MarginTop="501" Brush="Inventory.EquipBetterItem.FilterLock" />

            <ButtonWidget IsHidden="@IsWeapon4FilterLocked" Id="Weapon4" IsSelected="@IsWeapon4FilterSelected" Command.Click="ExecuteShowHideWeapon4Filter" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="35" SuggestedHeight="26" HorizontalAlignment="Right" MarginRight="!RightInventoryButtonMarignLeft" MarginTop="587" Brush="Inventory.EquipBetterItem.Filter" />
            <ButtonWidget IsEnabled="@IsWeapon4FilterLocked" Id="Weapon4Locked" Command.Click="ExecuteShowHideWeapon4Filter" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="21" SuggestedHeight="20" HorizontalAlignment="Right" MarginRight="!RightInventoryLockButtonMarignLeft" MarginTop="593" Brush="Inventory.EquipBetterItem.FilterLock" />
          </Children>
        </Widget>

        <!-- Filter Settings Panel -->
        <Widget IsHidden="@SettingsHidden" DoNotAcceptEvents="true" WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="!PanelWidth" SuggestedHeight="!PanelHeight" HorizontalAlignment="Center" VerticalAlignment="Center" Sprite="Frame1_canvas">
          <Children>
            <!-- Panel Frame -->
            <Widget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" HorizontalAlignment="Center" VerticalAlignment="Center" 
              ExtendLeft="!FrameExtendSize" ExtendRight="!FrameExtendSize" ExtendTop="!FrameExtendSize" ExtendBottom="!FrameExtendSize" Sprite="Frame1_frame">
            </Widget>
          
            <Widget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="592" SuggestedHeight="161" HorizontalAlignment="Center" VerticalAlignment="Top" PositionYOffset="-90" Sprite="StdAssets\tabbar_popup" VerticalFlip="true" DoNotAcceptEvents="true" >
              <Children>
                <!-- Title Text -->
                <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" MarginTop="85" HorizontalAlignment="Center" VerticalAlignment="Top"  Brush="Recruitment.Popup.Title.Text" Brush.FontSize="40" Text="@Title" DoNotAcceptEvents="true"/>
              </Children>
            </Widget>
            
            <!-- Top Panel -->
            <Widget WidthSizePolicy="StretchToParent" SuggestedHeight="!TopPanelHeight" MarginTop="60" MarginLeft="!SubPanelMarginLeft" MarginRight="!SubPanelMarginRight" VerticalAlignment="Top">
              <Children>

                <!-- Scrollbar -->
                <ScrollbarWidget Id="SavedGamesScrollbar" WidthSizePolicy="Fixed" HeightSizePolicy="StretchToParent" SuggestedWidth="24" HorizontalAlignment="Right" VerticalAlignment="Center" Sprite="StdAssets\ScrollBar01TrackBG@2x" MarginRight="5" AlignmentAxis="Vertical" Handle="SavedGamesScrollbarHandle" MaxValue="100" MinValue="0">
                  <Children>
                    <Widget Id="SavedGamesScrollbarHandle" WidthSizePolicy="StretchToParent" HorizontalAlignment="Left" VerticalAlignment="Top" Sprite="ScrollBar01Track@2x_9"/>
                  </Children>
                </ScrollbarWidget>

                <!-- Scroll Panel -->
                <ScrollablePanel WidthSizePolicy="Fixed" HeightSizePolicy="StretchToParent" SuggestedWidth="350" HorizontalAlignment="Left" AutoHideScrollBars="true" ClipRect="MyClipRect" InnerPanel="MyClipRect\OptionList" VerticalScrollbar="..\SavedGamesScrollbar" >
                  <Children>
                    <Widget Id="MyClipRect" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" ClipContents="true">
                      <Children>
                        <!--  List of options -->
                        <ListPanel Id="OptionList" DataSource="{List}" WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" HorizontalAlignment="Left" VerticalAlignment="Top" LayoutImp.LayoutMethod="VerticalBottomToTop" DoNotAcceptEvents="true">
                          <ItemTemplate>
                            <Widget WidthSizePolicy="StretchToParent" HeightSizePolicy="CoverChildren" DoNotAcceptEvents="true">
                              <Children>
                                <Widget WidthSizePolicy="Fixed" HeightSizePolicy="CoverChildren" SuggestedWidth="220" HorizontalAlignment="Left" VerticalAlignment="Center">
                                  <Children>
                                    <TextWidget WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" HorizontalAlignment="Left" Brush="Inventory.FilterTitleText" Text="@Title" />
                                  </Children>
                                </Widget>

                                <Widget WidthSizePolicy="Fixed" HeightSizePolicy="CoverChildren" SuggestedWidth="110" HorizontalAlignment="Right">
                                  <Children>
                                    <TextWidget WidthSizePolicy="CoverChildren" HeightSizePolicy="CoverChildren" HorizontalAlignment="Center" VerticalAlignment="Center" Brush="SPOptions.Dropdown.Item.Text" Text="@Text" />
                                    <ButtonWidget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="!IncrementButtonSize" SuggestedHeight="!IncrementButtonSize" HorizontalAlignment="Left" Brush="SPOptions.Dropdown.Left.Button" Command.Click="ExecutePrev"/>
                                    <ButtonWidget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="!IncrementButtonSize" SuggestedHeight="!IncrementButtonSize" HorizontalAlignment="Right" Brush="SPOptions.Dropdown.Right.Button" Command.Click="ExecuteNext"/>
                                  </Children>
                                </Widget>
                              </Children>
                            </Widget>
                          </ItemTemplate>
                        </ListPanel>
                      </Children>
                    </Widget>
                  </Children>
                </ScrollablePanel>
              </Children>
            </Widget>

            <!-- Bottom Buttons Panel -->
            <Widget WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed" MarginBottom="30" MarginLeft="10" MarginRight="10" SuggestedHeight="!BottomPanelHeight" HorizontalAlignment="Center" VerticalAlignment="Bottom">
              <Children>
                <!-- Left Panel -->
                <Widget WidthSizePolicy="Fixed" HeightSizePolicy="Fixed" SuggestedWidth="!BottomLeftSidePanelWidth" SuggestedHeight="!BottomLeftPanelHeight" HorizontalAlignment="Left" VerticalAlignment="Bottom">
                  <Children>
                    <!-- Close Button-->
                    <ButtonWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed" SuggestedHeight="64" HorizontalAlignment="Left" VerticalAlignment="Bottom" Brush="Popup.Cancel.Button.NineGrid" Command.Click="ExecuteHideSettings">
                      <Children>
                        <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" Brush="Popup.Button.Text" Brush.FontSize="!ButtonBiggerFontSize" Text="Close" DoNotAcceptEvents="true"/>
                      </Children>
                    </ButtonWidget>

                    <!-- Lock Button -->
                    <ButtonWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed" SuggestedHeight="64" HorizontalAlignment="Left" VerticalAlignment="Center" Brush="Popup.Done.Button.NineGrid" Command.Click="ExecuteLockValues">
                      <Children>
                        <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" Brush="Popup.Button.Text" Brush.FontSize="!ButtonBiggerFontSize" Text="Lock" DoNotAcceptEvents="true"/>
                      </Children>
                    </ButtonWidget>
                    
                    <!-- Default Button -->
                    <ButtonWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed" SuggestedHeight="64" HorizontalAlignment="Left" VerticalAlignment="Top" Brush="Popup.Done.Button.NineGrid" Command.Click="ExecuteDefaultValues">
                      <Children>
                        <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" Brush="Popup.Button.Text" Brush.FontSize="!ButtonBiggerFontSize" Text="Default" DoNotAcceptEvents="true"/>
                      </Children>
                    </ButtonWidget>

                  </Children>
                </Widget>
                <!-- Right Panel -->
                <Widget DataSource="{CopyPasteVM}" WidthSizePolicy="Fixed" HeightSizePolicy="StretchToParent" SuggestedWidth="!BottomRightSidePanelWidth" HorizontalAlignment="Right">
                  <Children>
                    <!-- Top -->
                    <Widget WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed" SuggestedHeight="120" VerticalAlignment="Top">
                      <Children>
                        <ButtonWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed" SuggestedHeight="64" HorizontalAlignment="Right" VerticalAlignment="Top" Brush="Popup.Done.Button.NineGrid" Command.Click="CopyFilter">
                          <Children>
                            <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" Brush="Popup.Button.Text" Brush.FontSize="!ButtonFontSize" Text="Copy Filter" DoNotAcceptEvents="true"/>
                          </Children>
                        </ButtonWidget>

                        <ButtonWidget IsEnabled="@ItemCopied" WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed" SuggestedHeight="64" HorizontalAlignment="Right" VerticalAlignment="Bottom" Brush="Popup.Cancel.Button.NineGrid" Command.Click="PasteFilter">
                          <Children>
                            <TextWidget IsEnabled="@ItemCopied" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" Brush="Popup.Button.Text" Brush.FontSize="!ButtonFontSize" Text="Paste Filter" DoNotAcceptEvents="true"/>
                          </Children>
                        </ButtonWidget>
                      </Children>
                    </Widget>

                    <Widget WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed" SuggestedHeight="120" VerticalAlignment="Bottom">
                      <Children>
                        <ButtonWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed" SuggestedHeight="64" HorizontalAlignment="Right" VerticalAlignment="Top" Brush="Popup.Done.Button.NineGrid" Command.Click="CopyCharacter">
                          <Children>
                            <TextWidget WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" Brush="Popup.Button.Text" Brush.FontSize="!ButtonFontSize" Text="Copy Character" DoNotAcceptEvents="true"/>
                          </Children>
                        </ButtonWidget>

                        <ButtonWidget IsEnabled="@CharacterCopied" WidthSizePolicy="StretchToParent" HeightSizePolicy="Fixed" SuggestedHeight="64" HorizontalAlignment="Right" VerticalAlignment="Bottom" Brush="Popup.Cancel.Button.NineGrid" Command.Click="PasteCharacter">
                          <Children>
                            <TextWidget IsEnabled="@CharacterCopied" WidthSizePolicy="StretchToParent" HeightSizePolicy="StretchToParent" Brush="Popup.Button.Text" Brush.FontSize="!ButtonFontSize" Text="Paste Character" DoNotAcceptEvents="true"/>
                          </Children>
                        </ButtonWidget>
                      </Children>
                    </Widget>
                  </Children>
                </Widget>
              </Children>
            </Widget>

          </Children>
        </Widget>
      </Children>
    </Widget>
  </Window>
</Prefab>